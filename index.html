<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My ❤️</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background:radial-gradient(circle at bottom,#0d0d1a,#000);
    font-family:'Segoe UI',sans-serif;
    color:rgb(243,212,212);
}

/* INTRO */
.intro{
    position:absolute;
    width:100%;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:50px;
    letter-spacing:8px;
    animation:introFade 4s forwards;
}
@keyframes introFade{
    0%{opacity:0; transform:scale(1.2);}
    30%{opacity:1;}
    80%{opacity:1;}
    100%{opacity:0;}
}

/* MESSAGE */
.message{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    font-size:26px;
    opacity:0;
    transition:all 1.5s ease;
}

.message.corner{
    top:20px;
    left:20px;
    transform:none;
    font-size:16px;
    opacity:1;
}

/* HEART WRAPPER */
#heartWrapper{
    position:absolute;
    width:100%;
    height:100%;
    top:0;
    left:0;
    transform-origin:center;
}

/* HEART IMAGES */
#heartImages{
    position:absolute;
    width:100%;
    height:100%;
    top:0;
    left:0;
}

.heart-img{
    position:absolute;
    width:70px;
    height:70px;
    object-fit:cover;
    border-radius:12px;
    opacity:0;
    transition:all 1.5s ease;
    box-shadow:0 8px 20px rgba(0,0,0,0.5);
}

/* HEARTBEAT */
@keyframes heartbeat{
    0%{ transform:scale(1);}
    25%{ transform:scale(1.05);}
    40%{ transform:scale(1);}
    60%{ transform:scale(1.08);}
    100%{ transform:scale(1);}
}

#heartWrapper.beat{
    animation:heartbeat 2.5s infinite;
}

/* TULIP SWAY */
@keyframes sway{
    from{ transform:rotate(-3deg);}
    to{ transform:rotate(3deg);}
}

canvas{
    position:fixed;
    top:0;
    left:0;
    pointer-events:none;
}
</style>
</head>

<body>

<div class="intro">FOR MY ❤️</div>

<div class="message" id="msg">
Happy Valentine My ❤️<br><br>
Cảm ơn em vì đã đến bên anh.<br>
Anh mong những ngày sau này<br>
đều có em bên cạnh.
</div>

<canvas id="fireworks"></canvas>

<div id="heartWrapper">
    <div id="heartImages"></div>
</div>

<script>
document.addEventListener("DOMContentLoaded",function(){

const intro=document.querySelector(".intro");
const msg=document.getElementById("msg");
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

/* ================= TULIPS ================= */

function createTulips(){

    const tulipImages=[
        "tuylip.png",
        "tuylip2.png",
        "tuylip3.png"
    ];

    for(let i=0;i<6;i++){
        let tulip=document.createElement("img");
        tulip.src=tulipImages[Math.floor(Math.random()*tulipImages.length)];
        tulip.style.position="fixed";
        tulip.style.bottom="0px";
        tulip.style.left=(i*15+5)+"%";
        tulip.style.width="120px";
        tulip.style.transformOrigin="bottom center";
        tulip.style.transform="scale(0)";
        tulip.style.transition="transform 3s ease";
        tulip.style.animation="sway 4s ease-in-out infinite alternate";
        document.body.appendChild(tulip);

        setTimeout(()=>{
            tulip.style.transform="scale(1)";
        },500);
    }
}
createTulips();

/* ================= FLOW ================= */

setTimeout(()=>{
    intro.style.display="none";
    msg.style.opacity=1;

    setTimeout(()=>{
        msg.classList.add("corner");
        showHeartImages();
        startFireworks();
    },5000);

},4000);

/* ================= HEART IMAGES ================= */

function showHeartImages(){

    const container=document.getElementById("heartImages");
    const wrapper=document.getElementById("heartWrapper");

    const images=[
        "img.jpg","img.jpg","img.jpg","img.jpg","img.jpg",
        "img.jpg","img.jpg","img.jpg","img.jpg","img.jpg"
    ];

    const centerX=window.innerWidth/2;
    const centerY=window.innerHeight/2;
    const scale=18;

    let points=[];
    for(let t=0;t<Math.PI*2;t+=0.25){
        points.push(t);
    }

    points.forEach((t,i)=>{
        const x=16*Math.pow(Math.sin(t),3);
        const y=-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));

        let img=document.createElement("img");
        img.src=images[i%images.length];
        img.className="heart-img";
        img.style.left=centerX+"px";
        img.style.top=centerY+"px";

        container.appendChild(img);

        setTimeout(()=>{
            img.style.left=(centerX+x*scale-35)+"px";
            img.style.top=(centerY+y*scale-35)+"px";
            img.style.opacity=1;

            if(i===points.length-1){
                setTimeout(()=>{
                    wrapper.classList.add("beat");
                },1500);
            }

        },100*i);
    });
}

/* ================= FIREWORKS ================= */

let particles=[];

function heartShape(t){
    return{
        x:16*Math.pow(Math.sin(t),3),
        y:-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))
    };
}

function explodeHeart(x,y){
    let color=`hsl(${Math.random()*360},100%,60%)`;

    for(let t=0;t<Math.PI*2;t+=0.05){
        let pos=heartShape(t);
        particles.push({
            x:x,
            y:y,
            dx:pos.x/2,
            dy:pos.y/2,
            alpha:1,
            color:color
        });
    }
}

function animate(){
    requestAnimationFrame(animate);
    ctx.fillStyle="rgba(0,0,0,0.18)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    for(let i=particles.length-1;i>=0;i--){
        let p=particles[i];
        p.x+=p.dx;
        p.y+=p.dy;
        p.dy+=0.02;
        p.alpha-=0.01;

        ctx.globalAlpha=p.alpha;
        ctx.shadowBlur=25;
        ctx.shadowColor=p.color;
        ctx.fillStyle=p.color;
        ctx.beginPath();
        ctx.arc(p.x,p.y,3,0,Math.PI*2);
        ctx.fill();

        if(p.alpha<=0) particles.splice(i,1);
    }
    ctx.globalAlpha=1;
}

function startFireworks(){
    animate();
    setInterval(()=>{
        let x=Math.random()*canvas.width*0.8+canvas.width*0.1;
        let y=Math.random()*canvas.height*0.4+canvas.height*0.1;
        explodeHeart(x,y);
    },1500);
}

});
</script>

</body>
</html>
