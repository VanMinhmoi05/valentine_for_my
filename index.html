<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My ❤️</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background:radial-gradient(circle at bottom,#0d0d1a,#000);
    font-family:'Segoe UI',sans-serif;
    color:white;
}

/* INTRO */
.intro{
    position:absolute;
    width:100%;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:50px;
    letter-spacing:8px;
    animation:introFade 4s forwards;
}
@keyframes introFade{
    0%{opacity:0; transform:scale(1.2);}
    30%{opacity:1;}
    80%{opacity:1;}
    100%{opacity:0;}
}

/* MESSAGE */
.message{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    font-size:26px;
    opacity:0;
    transition:2s;
}

/* SVG TULIPS */
.tulip{
    position:absolute;
    bottom:0;
    width:80px;
    transform-origin:bottom center;
    animation:sway 4s ease-in-out infinite alternate;
}
@keyframes sway{
    from{ transform:rotate(-3deg); }
    to{ transform:rotate(3deg); }
}

.bloom{
    transform:scale(0);
    transform-origin:bottom center;
    animation:bloom 3s forwards;
}
@keyframes bloom{
    to{ transform:scale(1); }
}

/* PETALS FALL */
.petal{
    position:absolute;
    width:12px;
    height:18px;
    background:pink;
    border-radius:50%;
    opacity:0.8;
    animation:fall 5s linear forwards;
}
@keyframes fall{
    to{
        transform:translateY(600px) rotate(360deg);
        opacity:0;
    }
}

canvas{
    position:fixed;
    top:0;
    left:0;
    pointer-events:none;
}
</style>
</head>

<body>

<div class="intro">FOR MY ❤️</div>

<div class="message" id="msg">
Happy Valentine My ❤️<br><br>
Cảm ơn em vì đã đến bên anh.<br>
Anh mong những ngày sau này<br>
đều có em bên cạnh.
</div>

<canvas id="fireworks"></canvas>

<script>
document.addEventListener("DOMContentLoaded",function(){

const intro=document.querySelector(".intro");
const msg=document.getElementById("msg");
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

/* CREATE SVG TULIPS */
function createTulips(){

    const tulipColors = [
        {top:"#ff5c7a", mid:"#ff2e63", bottom:"#b3003c"},
        {top:"#ff9ecb", mid:"#ff5fa2", bottom:"#cc2a6a"},
        {top:"#ffd84d", mid:"#ffb300", bottom:"#cc8400"}
    ];

    for(let i=0;i<6;i++){

        let tulip = document.createElement("div");
        tulip.className="tulip";
        tulip.style.left=(i*15+5)+"%";
        tulip.style.animationDuration=(4+Math.random()*2)+"s";

        let c = tulipColors[Math.floor(Math.random()*tulipColors.length)];

        tulip.innerHTML = `
        <svg viewBox="0 0 140 260">
            <defs>
                <linearGradient id="petalGrad${i}" x1="50%" y1="0%" x2="50%" y2="100%">
                    <stop offset="0%" stop-color="${c.top}"/>
                    <stop offset="50%" stop-color="${c.mid}"/>
                    <stop offset="100%" stop-color="${c.bottom}"/>
                </linearGradient>

                <linearGradient id="leafGrad${i}" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#4caf50"/>
                    <stop offset="100%" stop-color="#1b5e20"/>
                </linearGradient>

                <filter id="shadow${i}" x="-50%" y="-50%" width="200%" height="200%">
                    <feDropShadow dx="0" dy="5" stdDeviation="6" flood-color="#000" flood-opacity="0.4"/>
                </filter>
            </defs>

            <!-- stem -->
            <path d="M70 120 C65 170,75 210,70 250" 
                  stroke="#2e7d32" stroke-width="6" fill="none"/>

            <!-- leaves -->
            <path d="M70 170 C20 150,20 220,70 200"
                  fill="url(#leafGrad${i})"/>
            <path d="M70 180 C120 160,120 230,70 210"
                  fill="url(#leafGrad${i})"/>

            <!-- bloom -->
            <g class="bloom" filter="url(#shadow${i})">

                <!-- left petal -->
                <path d="M70 120 
                         C35 90,40 40,70 70 
                         C65 85,65 100,70 120 Z"
                      fill="url(#petalGrad${i})"/>

                <!-- right petal -->
                <path d="M70 120 
                         C105 90,100 40,70 70 
                         C75 85,75 100,70 120 Z"
                      fill="url(#petalGrad${i})"/>

                <!-- center petal -->
                <path d="M70 120
                         C50 60,90 60,70 35
                         C50 60,90 60,70 120 Z"
                      fill="url(#petalGrad${i})"/>
            </g>
        </svg>
        `;

        document.body.appendChild(tulip);

        /* falling petals realistic */
        setTimeout(()=>{
            for(let p=0;p<5;p++){
                let petal=document.createElement("div");
                petal.className="petal";
                petal.style.left=(tulip.offsetLeft+60)+"px";
                petal.style.top=(window.innerHeight-200)+"px";
                petal.style.width="16px";
                petal.style.height="22px";
                petal.style.background=c.mid;
                petal.style.borderRadius="60% 40% 60% 40%";
                petal.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)";
                petal.style.animationDuration=(5+Math.random()*3)+"s";
                petal.style.animationDelay=(p*0.5)+"s";
                document.body.appendChild(petal);
            }
        },3000);
    }
}


createTulips();

/* INTRO FLOW */
setTimeout(()=>{
    intro.style.display="none";
    msg.style.opacity=1;
    setTimeout(()=>{
        msg.style.opacity=0;
        startFireworks();
    },5000);
},4000);

/* FIREWORKS */
let particles=[];

function explode(x,y,type){

    if(type==="normal"){
        for(let i=0;i<100;i++){
            let angle=Math.random()*Math.PI*2;
            particles.push({
                x,y,
                dx:Math.cos(angle)*6,
                dy:Math.sin(angle)*6,
                alpha:1,
                color:`hsl(${Math.random()*360},100%,60%)`
            });
        }
    }

    if(type==="text"){
        const off=document.createElement("canvas");
        const octx=off.getContext("2d");
        off.width=300;
        off.height=150;
        octx.fillStyle="white";
        octx.font="bold 100px Arial";
        octx.textAlign="center";
        octx.fillText("MY",150,100);
        const data=octx.getImageData(0,0,300,150).data;

        for(let i=0;i<data.length;i+=4){
            if(data[i+3]>150){
                let px=(i/4)%300;
                let py=Math.floor((i/4)/300);
                particles.push({
                    x:x,
                    y:y,
                    dx:(px-150)/20,
                    dy:(py-75)/20,
                    alpha:1,
                    color:"#ffffff"
                });
            }
        }
    }
}

function animate(){
    requestAnimationFrame(animate);

    ctx.fillStyle="rgba(0,0,0,0.15)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    for(let i=particles.length-1;i>=0;i--){
        let p=particles[i];
        p.x+=p.dx;
        p.y+=p.dy;
        p.dy+=0.04;
        p.alpha-=0.015;

        ctx.globalAlpha=p.alpha;
        ctx.shadowBlur=20;
        ctx.shadowColor=p.color;
        ctx.fillStyle=p.color;
        ctx.beginPath();
        ctx.arc(p.x,p.y,2.5,0,Math.PI*2);
        ctx.fill();

        if(p.alpha<=0) particles.splice(i,1);
    }
    ctx.globalAlpha=1;
}

function startFireworks(){
    animate();
    setInterval(()=>{
        let r=Math.random();
        let x=Math.random()*canvas.width;
        let y=Math.random()*canvas.height/2;

        if(r<0.6) explode(x,y,"normal");
        else explode(canvas.width/2,canvas.height/3,"text");

    },1200);
}

});
</script>

</body>
</html>
