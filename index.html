<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My ‚ù§Ô∏è</title>

<style>
body{
    margin:0;
    overflow:hidden;
    font-family:'Segoe UI',sans-serif;
    background:black;
    color:white;
}

/* ===== INTRO ===== */
.intro{
    position:absolute;
    width:100%;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:45px;
    letter-spacing:8px;
    animation:introFade 4s forwards;
}

@keyframes introFade{
    0%{opacity:0; transform:scale(1.2);}
    30%{opacity:1;}
    80%{opacity:1;}
    100%{opacity:0; transform:scale(1);}
}

/* ===== CARD ===== */
.card{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:white;
    color:black;
    padding:30px 60px;
    border-radius:20px;
    cursor:pointer;
    display:none;
    font-size:20px;
    transition:0.3s;
}

.card:hover{
    transform:translate(-50%,-50%) scale(1.05);
}

/* ===== MESSAGE ===== */
.message{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    font-size:28px;
    opacity:0;
    transition:2s;
}

/* ===== PHOTOS ===== */
.photo{
    position:absolute;
    width:100px;
    height:100px;
    object-fit:cover;
    border-radius:15px;
    animation:pulse 2.5s infinite;
}

@keyframes pulse{
    0%{transform:scale(1);}
    50%{transform:scale(1.07);}
    100%{transform:scale(1);}
}

canvas{
    position:fixed;
    top:0;
    left:0;
    pointer-events:none;
}
</style>
</head>

<body>

<div class="intro">FOR MY ‚ù§Ô∏è</div>
<div class="card" onclick="openCard()">üíå Open</div>

<div class="message" id="msg">
Happy Valentine My ‚ù§Ô∏è<br><br>
C·∫£m ∆°n em v√¨ ƒë√£ ƒë·∫øn b√™n anh.<br>
Anh mong nh·ªØng ng√†y sau n√†y<br>
ƒë·ªÅu c√≥ em b√™n c·∫°nh.
</div>

<canvas id="fireworks"></canvas>

<audio id="music" loop 
src="https://cdn.pixabay.com/audio/2022/03/15/audio_6b7b8df8d8.mp3">
</audio>

<script>

// ===== INTRO TIMER =====
setTimeout(()=>{
    document.querySelector(".intro").style.display="none";
    document.querySelector(".card").style.display="block";
},4000);

// ===== OPEN CARD =====
function openCard(){
    document.querySelector(".card").style.display="none";
    let m=document.getElementById("msg");
    m.style.opacity=1;

    fadeInMusic();

    setTimeout(()=>{
        m.style.opacity=0;
        createHeartImageShape();
        startFireworks();
    },5000);
}

// ===== MUSIC FADE IN =====
function fadeInMusic(){
    let music=document.getElementById("music");
    music.volume=0;

    music.play().catch(()=>{});

    let vol=0;
    let fade=setInterval(()=>{
        if(vol<1){
            vol+=0.05;
            music.volume=vol;
        }else clearInterval(fade);
    },200);
}

// ===== HEART IMAGE SHAPE =====
const imgs=[
"https://images.unsplash.com/photo-1511988617509-a57c8a288659",
"https://images.unsplash.com/photo-1518199266791-5375a83190b7",
"https://images.unsplash.com/photo-1492724441997-5dc865305da7",
"https://images.unsplash.com/photo-1519677100203-a0e668c92439"
];

function heartEquation(t){
    return {
        x:16*Math.pow(Math.sin(t),3),
        y:-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))
    }
}

function createHeartImageShape(){
    let scale=12;
    for(let t=0;t<Math.PI*2;t+=0.15){
        let pos=heartEquation(t);
        let img=document.createElement("img");
        img.src=imgs[Math.floor(Math.random()*imgs.length)];
        img.className="photo";
        img.style.left=(window.innerWidth/2 + pos.x*scale -50)+"px";
        img.style.top=(window.innerHeight/2 + pos.y*scale -50)+"px";
        document.body.appendChild(img);
    }
}

// ===== FIREWORKS =====
function startFireworks(){
    const canvas=document.getElementById("fireworks");
    const ctx=canvas.getContext("2d");
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;

    let particles=[];

    function createExplosion(x,y,type){
        let color=`hsl(${Math.random()*360},100%,60%)`;

        if(type==="heart"){
            for(let t=0;t<Math.PI*2;t+=0.1){
                let pos=heartEquation(t);
                particles.push({
                    x:x,
                    y:y,
                    dx:pos.x/3,
                    dy:pos.y/3,
                    alpha:1,
                    color:"pink"
                });
            }
        }

        else if(type==="text"){
            let text="MY";
            ctx.font="bold 80px Arial";
            ctx.fillStyle="white";
            let width=ctx.measureText(text).width;
            ctx.fillText(text,x-width/2,y);

            for(let i=0;i<120;i++){
                particles.push({
                    x:x,
                    y:y,
                    dx:(Math.random()-0.5)*6,
                    dy:(Math.random()-0.5)*6,
                    alpha:1,
                    color:"white"
                });
            }
        }

        else{
            for(let i=0;i<80;i++){
                particles.push({
                    x:x,
                    y:y,
                    dx:Math.cos(Math.random()*2*Math.PI)*5,
                    dy:Math.sin(Math.random()*2*Math.PI)*5,
                    alpha:1,
                    color:color
                });
            }
        }
    }

    function animate(){
        requestAnimationFrame(animate);
        ctx.fillStyle="rgba(0,0,0,0.2)";
        ctx.fillRect(0,0,canvas.width,canvas.height);

        particles.forEach((p,i)=>{
            p.x+=p.dx;
            p.y+=p.dy;
            p.dy+=0.05;
            p.alpha-=0.01;

            ctx.globalAlpha=p.alpha;
            ctx.fillStyle=p.color;
            ctx.beginPath();
            ctx.arc(p.x,p.y,2,0,Math.PI*2);
            ctx.fill();

            if(p.alpha<=0) particles.splice(i,1);
        });

        ctx.globalAlpha=1;
    }

    animate();

    setInterval(()=>{
        let r=Math.random();
        if(r<0.4) createExplosion(Math.random()*canvas.width,Math.random()*canvas.height/2,"normal");
        else if(r<0.7) createExplosion(Math.random()*canvas.width,Math.random()*canvas.height/2,"heart");
        else createExplosion(canvas.width/2,canvas.height/3,"text");
    },1200);
}

</script>

</body>
</html>
