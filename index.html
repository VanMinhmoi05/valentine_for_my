<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My ❤️</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background:black;
    font-family:'Segoe UI',sans-serif;
    color:white;
}

/* INTRO */
.intro{
    position:absolute;
    width:100%;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:45px;
    letter-spacing:8px;
    animation:introFade 4s forwards;
}

@keyframes introFade{
    0%{opacity:0; transform:scale(1.2);}
    30%{opacity:1;}
    80%{opacity:1;}
    100%{opacity:0;}
}

/* MESSAGE */
.message{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    font-size:26px;
    opacity:0;
    transition:2s;
}

/* PHOTOS */
.photo{
    position:absolute;
    width:85px;
    height:85px;
    object-fit:cover;
    border-radius:15px;
    box-shadow:0 0 20px rgba(255,105,180,0.7);
    opacity:0;
    transition:1s;
}

/* FLOATING NAME */
.name{
    position:absolute;
    font-size:28px;
    font-weight:bold;
    color:pink;
    pointer-events:none;
}

canvas{
    position:fixed;
    top:0;
    left:0;
    pointer-events:none;
}
</style>
</head>

<body>

<div class="intro">FOR MY ❤️</div>

<div class="message" id="msg">
Happy Valentine My ❤️<br><br>
Cảm ơn em vì đã đến bên anh.<br>
Anh mong những ngày sau này<br>
đều có em bên cạnh.
</div>

<canvas id="fireworks"></canvas>

<audio id="music" loop
src="https://cdn.pixabay.com/audio/2022/03/15/audio_6b7b8df8d8.mp3">
</audio>

<script>
document.addEventListener("DOMContentLoaded", function(){

const intro = document.querySelector(".intro");
const msg = document.getElementById("msg");
const music = document.getElementById("music");

/* SAU INTRO */
setTimeout(()=>{
    intro.style.display="none";
    msg.style.opacity=1;
    fadeInMusic();

    setTimeout(()=>{
        msg.style.opacity=0;
        createHeartImages();
        floatingName();
        startFireworks();
    },5000);

},4000);

/* MUSIC FADE */
function fadeInMusic(){
    music.volume=0;
    music.play().catch(()=>{});
    let v=0;
    let fade=setInterval(()=>{
        if(v<1){
            v+=0.05;
            music.volume=v;
        }else clearInterval(fade);
    },200);
}

/* HEART SHAPE */
function heart(t){
    return {
        x:16*Math.pow(Math.sin(t),3),
        y:-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))
    }
}

/* IMAGES */
const imgs=[
"https://cdn.pixabay.com/photo/2017/08/30/07/52/love-2696737_640.jpg",
"https://cdn.pixabay.com/photo/2016/11/29/09/32/love-1867285_640.jpg",
"https://cdn.pixabay.com/photo/2017/01/06/19/15/heart-1959078_640.jpg",
"https://cdn.pixabay.com/photo/2016/03/09/09/30/love-1246428_640.jpg"
];

function createHeartImages(){
    let scale=11;
    for(let t=0;t<Math.PI*2;t+=0.2){
        let pos=heart(t);
        let img=document.createElement("img");
        img.src=imgs[Math.floor(Math.random()*imgs.length)];
        img.className="photo";

        let x=window.innerWidth/2 + pos.x*scale -42;
        let y=window.innerHeight/2 + pos.y*scale -42;

        img.style.left=x+"px";
        img.style.top=y+"px";
        img.style.transform="rotate("+(Math.random()*30-15)+"deg)";
        document.body.appendChild(img);

        setTimeout(()=>{ img.style.opacity=1; },200);

        img.animate([
            { transform: img.style.transform+" scale(1)" },
            { transform: img.style.transform+" scale(1.08)" },
            { transform: img.style.transform+" scale(1)" }
        ],{
            duration:2500,
            iterations:Infinity
        });
    }
}

/* FLOATING NAME */
function floatingName(){
    setInterval(()=>{
        let n=document.createElement("div");
        n.className="name";
        n.innerText="My";
        n.style.left=Math.random()*window.innerWidth+"px";
        n.style.top=window.innerHeight+"px";
        document.body.appendChild(n);

        n.animate([
            { transform:"translateY(0)", opacity:1 },
            { transform:"translateY(-600px)", opacity:0 }
        ],{
            duration:6000,
            easing:"linear"
        });

        setTimeout(()=>n.remove(),6000);
    },1000);
}

/* FIREWORKS */
function startFireworks(){
    const canvas=document.getElementById("fireworks");
    const ctx=canvas.getContext("2d");
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;

    let particles=[];

    function explode(x,y,type){
        if(type==="heart"){
            for(let t=0;t<Math.PI*2;t+=0.12){
                let pos=heart(t);
                particles.push({x,y,dx:pos.x/3,dy:pos.y/3,a:1,color:"pink"});
            }
        }else{
            for(let i=0;i<80;i++){
                let angle=Math.random()*Math.PI*2;
                particles.push({
                    x,y,
                    dx:Math.cos(angle)*5,
                    dy:Math.sin(angle)*5,
                    a:1,
                    color:`hsl(${Math.random()*360},100%,60%)`
                });
            }
        }
    }

    function animate(){
        requestAnimationFrame(animate);
        ctx.fillStyle="rgba(0,0,0,0.2)";
        ctx.fillRect(0,0,canvas.width,canvas.height);

        for(let i=particles.length-1;i>=0;i--){
            let p=particles[i];
            p.x+=p.dx;
            p.y+=p.dy;
            p.a-=0.02;

            ctx.globalAlpha=p.a;
            ctx.fillStyle=p.color;
            ctx.beginPath();
            ctx.arc(p.x,p.y,2,0,Math.PI*2);
            ctx.fill();

            if(p.a<=0) particles.splice(i,1);
        }
        ctx.globalAlpha=1;
    }

    animate();

    setInterval(()=>{
        let r=Math.random();
        if(r<0.5) explode(Math.random()*canvas.width,Math.random()*canvas.height/2,"normal");
        else explode(Math.random()*canvas.width,Math.random()*canvas.height/2,"heart");
    },1200);
}

});
</script>

</body>
</html>
